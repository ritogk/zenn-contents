---
title: "vue3ç³» + compositionApi + webpack5ç³» + typescriptã®çµ„ã¿åˆã‚ã›ã§WebWorkerã‚’ä½¿ã†ã€‚
" # è¨˜äº‹ã®ã‚¿ã‚¤ãƒˆãƒ«
emoji: "ğŸ™†"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["typescript", "vue", "WebWorker"] # ãƒˆãƒ”ãƒƒã‚¯ã‚¹ï¼ˆã‚¿ã‚°ï¼‰["markdown", "rust", "aws"]ã®ã‚ˆã†ã«æŒ‡å®šã™ã‚‹
published: true # å…¬é–‹è¨­å®šï¼ˆfalseã«ã™ã‚‹ã¨ä¸‹æ›¸ãï¼‰
---

# æ¦‚è¦
ã‚¿ã‚¤ãƒˆãƒ«ãªç’°å¢ƒã§ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã‚’å®Ÿè£…ã—ãŸæ™‚ã®ãƒ¡ãƒ¢ã§ã™ã€‚

# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ
```
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ libs
â”‚   â”‚   â””â”€â”€ worker.ts
â”‚   â”œâ”€â”€ App.vue
```

# workerå‘¼ã³å‡ºã—å´
```ts title="App.vue"
<template>
  <div>web worker test</div>
</template>

<script lang="ts">
import { defineComponent } from 'vue';

export default defineComponent({
  setup() {
    const worker = new Worker(new URL('@/libs/worker.ts', import.meta.url));
    worker.postMessage('data');
    worker.onmessage = (event: MessageEvent<int>) => {
      console.log('[worker_thread_result]:' + event.data);
    };

    let num = 0;
    const st = new Date().getTime();
    for (let i = 0; i < 100000000; i++) {
      num = num + i;
    }
    console.log('[main_thread_result]' + num);

    return {};
  },
});
</script>
```

# workerå´
```ts title="worker.ts"
const w: Worker = self as any;

w.onmessage = (event: MessageEvent<str>) => {
  let num = 0;
  for (let i = 0; i < 100000000; i++) {
    num = num + i;
  }
  self.postMessage(num);
};

export default w;
```

# ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã®ç¢ºèª
Mainä»¥å¤–ã®ã‚¹ãƒ¬ãƒƒãƒ‰ãŒç«‹ã¡ä¸ŠãŒã£ã¦ã„ãŸã‚‰OK
![](/images/3.jpg)